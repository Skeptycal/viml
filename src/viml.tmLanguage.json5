{
    "$schema": "https://raw.githubusercontent.com/dunstontc/textmate/master/schema/tmLanguage.schema.json",
    "name": "viml",
    "scopeName": "source.viml",
    "patterns": [
        {
            "include": "#comment"
        },
        {
            "include": "#constant"
        },
        {
            "include": "#entity"
        },
        {
            "include": "#keyword"
        },
        {
            "include": "#meta"
        },
        {
            "include": "#punctuation"
        },
        {
            "include": "#storage"
        },
        {
            "include": "#strings"
        },
        {
            "include": "#support"
        },
        {
            "include": "#variable"
        },
        {
            "include": "#syntax"
        },
        {
            "include": "#commands"
        },
        {
            "include": "#option"
        }
    ],
    "repository": {
        "storage": {
            "patterns": [
                {
                    "match": "\\b(call|let|unlet|set(l|local)?|com(mand)?|abort|autocmd|color(scheme)?)\\b",
                    "name": "storage.viml"
                },
                {
                    "name": "storage.map.viml",
                    "match": "\\b([cinostvx]?(nore)?map)\\b"
                },
                {
                    "name": "storage.type.viml",
                    "match": "([<](?i:BUFFER|EXPR|SILENT|SID)[>])"
                },
                {
                    "name": "storage.plugin.viml",
                    "match": "(Plug|Plugin)"
                }
            ]
        },
        "keyword": {
            "patterns": [
                {
                    "name": "keyword.control.viml",
                    "match": "\\b(if|while|for|return|end(if|for|while)?|au(g|group)|else(if|)?|do|in| : )\\b"
                },
                {
                    "name": "keyword.control.viml",
                    "match": "\\b(break|continue|try|catch|endtry|finally|finish|throw|range)\\b"
                },
                {
                    "name": "keyword.function.viml",
                    "match": "\\b(fun|func|function|endfunction|endfunc)\\b"
                },
                {
                    "name": "keyword.other.viml",
                    "match": "\\b(normal|silent)\\b"
                },
                {
                    "include": "#operators"
                }
            ]
        },
        "operators": {
            "patterns": [
                {
                    "name": "keyword.operator.viml",
                    "match": "([#+?!=~\\\\])"
                },
                {
                    "name": "keyword.operator.viml",
                    "match": " ([:+-.]|[&|]{2})( |$)"
                },
                {
                    "name": "keyword.operator.viml",
                    "match": "([.]{3})"
                },
                {
                    "name": "keyword.operator.viml",
                    "match": "( [<>] )"
                },
                {
                    "name": "keyword.operator.viml",
                    "match": "(>=)"
                }
            ]
        },
        "entity": {
            "patterns": [
                {
                    "name": "entity.name.function.viml",
                    "match": "(([absg]\\:)?[a-zA-Z0-9_#.]{2,})\\b(?=\\()"
                }
            ]
        },
        "variable": {
            "patterns": [
                {
                    "name": "variable.parameter.viml",
                    "match": "(?<=\\()([a-zA-Z]+)(?=\\))"
                },
                {
                    "name": "variable.other.viml",
                    "match": "\\b([absgl]:[a-zA-Z0-9_.#]+)\\b(?!\\()"
                }
            ]
        },
        "constant": {
            "patterns": [
                {
                    "name": "constant.language.boolean.viml",
                    "match": "\\b(true|false)\\b"
                },
                {
                    "name": "constant.numeric.viml",
                    "match": "([0-9]+)"
                },
                {
                    "name": "constant.language.map.viml",
                    "match": "(?i:[<](BS|BAR|CR|DEL|ESC|SPACE|LEADER|Plug|nop)[>])"
                },
                {
                    "name": "constant.language.map.viml",
                    "match": "([<](([cCaAmMsS]\\-)?(?i:Tab|UP|DOWN|LEFT|RIGHT|SPACE))[>])"
                },
                {
                    "name": "constant.language.map.viml",
                    "match": "([<]([cCaAmMsS]-[a-zA-Z0-9])[>])"
                },
                {
                    "name": "constant.language.map.viml",
                    "match": "([<](F[0-9]+)[>])"
                }
            ]
        },
        "support": {
            "patterns": [
                {
                    "name": "support.function.viml",
                    "match": "(add|call|delete|empty|extend|get|has|isdirectory|join|printf)(?=\\()"
                },
                {
                    "name": "support.function.viml",
                    "match": "\\b(echo(m|hl)?|exe(cute)?|redir|redraw|sleep|so(urce)?|wincmd|setf)\\b"
                },
                {
                    "name": "support.type.builtin.viml",
                    "match": "(v\\:(true|false|count|exception|operator|register|shell_error|val|version))"
                },
                {
                    "name": "support.type.builtin.viml",
                    "match": "(&(cpo|omnifunc|paste|previewwindow|rtp|tags|term|shell(cmdflag|redir)?)|wrap)"
                },
                {
                    "name": "support.variable.args.viml",
                    "match": "\\<args\\>"
                },
                {
                    "name": "support.type.syntax.viml",
                    "match": "(None|ErrorMsg|WarningMsg)"
                }
            ]
        },
        "punctuation": {
            "patterns": [
                {
                    "name": "punction.parens.viml",
                    "match": "([()])"
                },
                {
                    "name": "punction.comma.viml",
                    "match": "([,])"
                }
            ]
        },
        "meta": {
            "patterns": [
                {
                    "name": "meta.docstring.viml",
                    "match": "\"\"\""
                }
            ]
        },
        "strings": {},
        "comment": {},
        "syntax": {
            "patterns": [
                {
                    "name": "support.variable.syntax.option.viml",
                    "match": "nohl"
                },
                {
                    "name": "keyword.control.syntax.viml",
                    "match": "syn case (ignore|match)"
                },
                {
                    "name": "keyword.control.syntax.viml",
                    "match": "syn(tax)? (clear|enable|off|on|manual|sync)"
                },
                {
                    "name": "keyword.other.syntax.viml",
                    "match": "\\b(contained|excludenl|keepend|oneline|skipwhite|transparent)\\b"
                },
                {
                    "name": "keyword.other.syntax.viml",
                    "match": "\\b(add|containedin|contains|matchgroup|nextgroup)"
                },
                {
                    "name": "keyword.other.syntax.region.viml",
                    "match": "\\b(start|skip|end)"
                },
                {
                    "captures": {
                        "0": {
                            "name": "support.type.syntax.viml"
                        },
                        "1": {
                            "name": "storage.syntax.viml"
                        },
                        "3": {
                            "name": "variable.other.syntax-scope.viml"
                        },
                        "4": {
                            "name": "storage.modifier.syntax.viml"
                        }
                    },
                    "match": "(syn|syntax)\\s+(case|cluster|keyword|match|region)(\\s+\\w+\\s+)(contained)?",
                    "patterns": []
                },
                {
                    "captures": {
                        "1": {
                            "name": "storage.highlight.viml"
                        },
                        "2": {
                            "name": "storage.modifier.syntax.viml"
                        },
                        "3": {
                            "name": "support.function.highlight.viml"
                        },
                        "4": {
                            "name": "variable.other.viml"
                        },
                        "5": {
                            "name": "variable.other.viml"
                        }
                    },
                    "match": "(hi|highlight)(?:\\s+)(def|default)(?:\\s+)(link)(?:\\s+)(\\w+)(?:\\s+)(\\w+)",
                    "patterns": []
                }
            ]
        },
        "option": {
            "patterns": [
                {
                    "name": "support.variable.option.viml",
                    "match": "(?i:foldmethod)"
                },
                {
                    "name": "support.type.setting.viml",
                    "match": "(?i:\\b(no)?(cursorline|hidden|list|magic|modifiable|spell|swapfile|wrap))"
                },
                {
                    "name": "support.type.option.viml",
                    "match": "(bs|background|backspace|bufhidden|buftype|clipboard|cmdheight|completeopt|commentstring|concealcursor|conceallevel|encoding|filetype|foldcolumn|foldlevel|guifont|guioptions|history|iskeyword|langmenu|lines|linespace|listchars|mapleader|maplocalleader|mouse|omnifunc|pastetoggle|rulerformat|runtimepath|scrolloff|scrolljump|sessionoptions|shell|shiftwidth|shortmess|syntax|tabpagemax|tabstop|undolevels|undoreload|viewoptions|virtualedit|whichwrap|wildmode|winminheight)(?==)"
                }
            ]
        },
        "commands": {
            "patterns": [
                {
                    "name": "support.type.event.viml",
                    "match": "\\b(BufNewFile|BufReadPre|BufRead|BufReadPost|BufReadCmd|FileReadPre|FileReadPost|FileReadCmd|FilterReadPre|FilterReadPost|StdinReadPre|StdinReadPost|BufWrite|BufWritePre|BufWritePost|BufWriteCmd|FileWritePre|FileWritePost|FileWriteCmd|FileAppendPre|FileAppendPost|FileAppendCmd|FilterWritePre|FilterWritePost|BufAdd|BufCreate|BufDelete|BufWipeout|BufFilePre|BufFilePost|BufEnter|BufLeave|BufWinEnter|BufWinLeave|BufUnload|BufHidden|BufNew|SwapExists|TermOpen|TermClose|FileType|Syntax|OptionSet|VimEnter|GUIEnter|GUIFailed|TermResponse|QuitPre|VimLeavePre|VimLeave|DirChanged|FileChangedShell|FileChangedShellPost|FileChangedRO|ShellCmdPost|ShellFilterPost|CmdUndefined|FuncUndefined|SpellFileMissing|SourcePre|SourceCmd|VimResized|FocusGained|FocusLost|CursorHold|CursorHoldI|CursorMoved|CursorMovedI|WinNew|WinEnter|WinLeave|TabEnter|TabLeave|TabNew|TabNewEntered|TabClosed|CmdlineEnter|CmdlineLeave|CmdwinEnter|CmdwinLeave|InsertEnter|InsertChange|InsertLeave|InsertCharPre|TextYankPost|TextChanged|TextChangedI|ColorScheme|RemoteReply|QuickFixCmdPre|QuickFixCmdPost|SessionLoadPost|MenuPopup|CompleteDone|User)\\b"
                },
                {
                    "name": "storage.other.command.viml",
                    "match": "\\bcom"
                },
                {
                    "name": "support.type.option.viml",
                    "match": "(?i:\\b(no)?(cursorline|hidden|laststatus|list|modifiable|spell|statusline|swapfile|wrap))"
                },
                {
                    "begin": "(aug(roup)?)",
                    "end": "(augroup\\sEND|$)",
                    "name": "support.function.augroup.viml"
                }
            ]
        }
    }
}
